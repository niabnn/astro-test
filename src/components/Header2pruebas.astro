---
import "@/styles/globals.css";

import HeaderNav from "./HeaderNav";

const logoSrc = "../assets/images/Tu-San-Agustin_Logo.png";
const flagSrc = "../assets/images/united-states-of-america.png";

const phone = {
  label: "Llámanos:(+57) 3168753305",
  href: "tel:+573168753305",
};

const social = [
  {
    icon: "fa-brands fa-facebook-f",
    href: "https://www.facebook.com/tusanagustin/",
  },
  {
    icon: "fa-brands fa-instagram",
    href: "https://www.instagram.com/tusanagustin/",
  },
  { icon: "fa-brands fa-tiktok", href: "https://www.tiktok.com/@tusanagustin" },
  {
    icon: "fa-brands fa-pinterest",
    href: "https://es.pinterest.com/tusanagustin/_saved/",
  },
  {
    icon: "fa-brands fa-linkedin",
    href: "https://www.linkedin.com/in/san-agust%C3%ADn-eventos-y-turismo-b36aa8109/",
  },
  {
    icon: "fa-brands fa-youtube",
    href: "https://www.youtube.com/user/tusanagustin",
  },
  {
    icon: "fab fa-flickr",
    href: "https://www.flickr.com/photos/tusanagustin/",
  },
  {
    icon: "fab fa-whatsapp",
    href: "https://api.whatsapp.com/send/?phone=573168753305&text=Hola%21&type=phone_number&app_absent=0",
  },
];

const nav = [
  { label: "Inicio", href: "/" },
  {
    label: "Sobre nosotros",
    href: "https://www.tusanagustin.com/sobre-nosotros",
  },
  { label: "Servicios", href: "https://www.tusanagustin.com/servicios" },
  { label: "Galerías", href: "https://www.tusanagustin.com/galeria" },
  { label: "Lugares", href: "https://www.tusanagustin.com/lugares" },
  { label: "Historias", href: "#" },
  { label: "Blog", href: "https://www.tusanagustin.com/blog" },
];

const contact = { label: "Contacto", onClickId: "openContactModal" };
---

<header>
  <div class="header-row">
    <img
      id="logo-white"
      src="../assets/images/Tu-San-Agustin_Logo.png"
      alt="Tu San Agustín"
      height="80"
      width="80"
    />
    <a class="social-header" href="tel:+573168753305"
      >Llámanos:(+57) 3168753305</a
    >

    <div class="social-header">
      <a
        href="https://www.facebook.com/tusanagustin/"
        target="_blank"
        rel="noopener noreferrer"><i class="fa-brands fa-facebook-f"></i></a
      >
      <a
        href="https://www.instagram.com/tusanagustin/"
        target="_blank"
        rel="noopener noreferrer"><i class="fa-brands fa-instagram"></i></a
      >
      <a
        href="https://www.tiktok.com/@tusanagustin"
        target="_blank"
        rel="noopener noreferrer"><i class="fa-brands fa-tiktok"></i></a
      >
      <a
        href="https://es.pinterest.com/tusanagustin/_saved/"
        target="_blank"
        rel="noopener noreferrer"><i class="fa-brands fa-pinterest"></i></a
      >
      <a
        href="https://www.linkedin.com/in/san-agust%C3%ADn-eventos-y-turismo-b36aa8109/"
        target="_blank"
        rel="noopener noreferrer"><i class="fa-brands fa-linkedin"></i></a
      >
      <a
        href="https://www.youtube.com/user/tusanagustin"
        target="_blank"
        rel="noopener noreferrer"><i class="fa-brands fa-youtube"></i></a
      >
      <a
        href="https://www.flickr.com/photos/tusanagustin/"
        target="_blank"
        rel="noopener noreferrer"><i class="fa-brands fa-flickr"></i></a
      >
      <a
        href="https://api.whatsapp.com/send/?phone=573168753305&text=Hola%21&type=phone_number&app_absent=0"
        target="_blank"
        rel="noopener noreferrer"><i class="fa-brands fa-whatsapp"></i></a
      >
    </div>

    <img
      class="flag"
      src="../assets/images/united-states-of-america.png"
      alt="Idioma: Inglés"
      height="30"
      width="30"
    />

    <button
      class="mobile-menu-toggle"
      aria-label="Abrir menú"
      onclick="toggleMobileMenu()"
    >
      <i class="fas fa-bars"></i>
    </button>
  </div>
</header>

<div class="nav-overlay" onclick="closeMobileMenu()"></div>

<div class="nav-sidebar" id="navSidebar">
  <button class="nav-close" aria-label="Cerrar" onclick="closeMobileMenu()">
    <i class="fas fa-times"></i>
  </button>

  <ul>
    {
      nav.map((item) => (
        <li>
          <a href={item.href} onclick="closeMobileMenu()">
            {item.label}
          </a>
        </li>
      ))
    }
    <li>
      <a
        href="#"
        class="btn btn-menu btn-primary"
        onclick="closeMobileMenu(); (window.openContactModal?.())">Contacto</a
      >
    </li>
  </ul>

  <div class="social-links" style="padding:0 20px; margin-top:10px;">
    {
      social.map((s) => (
        <a
          href={s.href}
          target="_blank"
          rel="noopener noreferrer"
          aria-label={s.icon}
        >
          <i class={s.icon} />
        </a>
      ))
    }
  </div>
</div>

<nav>
  <ul>
    {
      nav.map((item) => (
        <li>
          <a href={item.href}>{item.label}</a>
        </li>
      ))
    }
    <li>
      <a href="#" class="btn btn-primary" onclick="window.openContactModal?.()"
        >Contacto</a>
    </li>
  </ul>
</nav>

<script>
  // Helpers
  function getEls() {
    const sidebar = document.getElementById(
      "navSidebar"
    ) as HTMLDivElement | null;
    const overlay = document.querySelector<HTMLDivElement>(".nav-overlay");
    return { sidebar, overlay };
  }

  function openMobileMenu() {
    const { sidebar, overlay } = getEls();
    if (!sidebar || !overlay) return;

    sidebar.classList.add("active");
    overlay.style.display = "block";
    document.documentElement.style.overflow = "hidden";
  }

  function closeMobileMenu() {
    const { sidebar, overlay } = getEls();
    if (!sidebar || !overlay) return;

    sidebar.classList.remove("active");
    overlay.style.display = "none";
    document.documentElement.style.overflow = "";
  }

  function toggleMobileMenu() {
    const { sidebar } = getEls();
    if (!sidebar) return;
    const isOpen = sidebar.classList.contains("active");
    if (isOpen) closeMobileMenu();
    else openMobileMenu();
  }

  (window as any).toggleMobileMenu = toggleMobileMenu;
  (window as any).closeMobileMenu = closeMobileMenu;

  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape") closeMobileMenu();
  });
  const { overlay } = getEls();
  overlay?.addEventListener("click", closeMobileMenu);
</script>
